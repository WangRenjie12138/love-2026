<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç»™æˆ‘æœ€äº²çˆ±çš„å¥³å­©</title>
    <style>
        /* æƒ…äººèŠ‚æ¬¢å¿«æ¸©é¦¨é£æ ¼ */
        body { margin: 0; padding: 0; background: linear-gradient(180deg, #fff0f5 0%, #ffe4ec 30%, #ffd6e0 70%, #ffc8d9 100%); color: #5c374c; font-family: "Microsoft YaHei", sans-serif; overflow: hidden; min-height: 100vh; }
        #start-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #ffb7c5 100%); display: flex; justify-content: center; align-items: center; z-index: 999; flex-direction: column; transition: opacity 1s; }
        #content { display: none; height: 100vh; flex-direction: column; align-items: center; background: linear-gradient(180deg, #fff5f8 0%, #ffe8f0 40%, #ffdfea 100%); padding-top: 20px; text-align: center; }
        .btn { padding: 15px 40px; border-radius: 30px; background: #fff; color: #e91e63; font-size: 18px; border: none; font-weight: bold; box-shadow: 0 4px 20px rgba(233,30,99,0.3); cursor: pointer; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        
        /* è®¡æ—¶å™¨æ ·å¼ */
        .timer-box { margin-top: 30px; font-size: 1.2rem; color: #b23a5c; text-shadow: 0 0 20px rgba(255,182,193,0.6); }
        .days { font-size: 3rem; font-weight: bold; background: linear-gradient(135deg, #e91e63, #f06292); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; display: block; margin: 10px 0; }
        .label { font-size: 1rem; color: #8b5a6b; }

        /* ç…§ç‰‡å®¹å™¨ - çº¯æ¯›ç»ç’ƒç•™ç™½ï¼Œæ— ç™½è¾¹ï¼Œå›¾ç‰‡ç›´æ¥è´´åˆå±•ç¤º */
        .photo-container { margin-top: 40px; width: 80%; height: 40vh; position: relative; perspective: 1000px; background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 15px; overflow: hidden; display: flex; justify-content: center; align-items: center; box-shadow: 0 8px 32px rgba(233,30,99,0.1); cursor: pointer; }
        .photo { max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); transition: all 1s; opacity: 0; pointer-events: none; }
        .photo.active { opacity: 1; transform: translate(-50%, -50%) translateZ(0); pointer-events: auto; }

        /* å›¾ç‰‡æ”¾å¤§å¼¹å±‚ - æ¯›ç»ç’ƒæ•ˆæœï¼Œæ”¾å¤§/è¿˜åŸè¿‡æ¸¡åŠ¨ç”» */
        .photo-modal { display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 240, 248, 0.55); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); z-index: 1000; justify-content: center; align-items: center; cursor: zoom-out; opacity: 0; visibility: hidden; pointer-events: none; transition: opacity 0.35s ease, visibility 0.35s ease; }
        .photo-modal.open { opacity: 1; visibility: visible; pointer-events: auto; }
        .photo-modal img { max-width: 95vw; max-height: 95vh; object-fit: contain; border-radius: 8px; box-shadow: 0 8px 40px rgba(233,30,99,0.2); cursor: default; transform: scale(0.85); transition: transform 0.35s ease; }
        .photo-modal.open img { transform: scale(1); }

        /* åº•éƒ¨æƒ…è¯ */
        .message { margin-top: auto; margin-bottom: 40px; padding: 0 20px; font-size: 14px; color: #9c6b7a; line-height: 1.6; }

        /* éŸ³ä¹æ§åˆ¶ */
        #music-icon { position: fixed; top: 20px; right: 20px; width: 30px; height: 30px; border-radius: 50%; background: rgba(255,255,255,0.9); border: 2px solid #f48fb1; display: flex; justify-content: center; align-items: center; font-size: 12px; animation: spin 4s linear infinite; z-index: 100; box-shadow: 0 2px 10px rgba(233,30,99,0.2); cursor: pointer; -webkit-tap-highlight-color: transparent; }
        #music-icon.paused { animation-play-state: paused; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- 1. å¯åŠ¨é¡µï¼šä¸ºäº†è§£å†³æ‰‹æœºæµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾éŸ³ä¹çš„é™åˆ¶ï¼Œå¿…é¡»è®©ç”¨æˆ·ç‚¹å‡»ä¸€ä¸‹ -->
    <div id="start-screen">
        <h1 style="color: white; margin-bottom: 30px;">ğŸ</h1>
        <button class="btn" onclick="startSurprise()">ç‚¹å‡»ç­¾æ”¶æƒŠå–œ</button>
    </div>

    <!-- 2. å†…å®¹é¡µ -->
    <div id="content">
        <div id="music-icon" onclick="toggleMusic()" title="ç‚¹å‡»æš‚åœ/æ’­æ”¾">ğŸµ</div>
        
        <!-- æ‹çˆ±è®¡æ—¶å™¨ -->
        <div class="timer-box">
            æˆ‘ä»¬ç›¸çˆ±å·²ç»
            <span class="days"><span id="days">0</span>å¤©</span>
            <span class="label" id="timer-detail">00å°æ—¶ 00åˆ† 00ç§’</span>
        </div>

        <!-- ç…§ç‰‡è½®æ’­ -->
        <div class="photo-container">
            <!-- ç¡®ä¿ä½ çš„ç…§ç‰‡å‘½åä¸º 1.jpg åˆ° 5.jpg -->
            <img src="1.jpg" class="photo active">
            <img src="2.jpg" class="photo">
            <img src="3.jpg" class="photo">
            <img src="4.jpg" class="photo">
            <img src="5.jpg" class="photo">
            <img src="6.jpg" class="photo">
            <img src="7.jpg" class="photo">
            <img src="8.jpg" class="photo">
            <img src="9.jpg" class="photo">
            <img src="10.jpg" class="photo">
            <img src="11.jpg" class="photo">
            <img src="12.jpg" class="photo">
            <img src="13.jpg" class="photo">
            <img src="14.jpg" class="photo">
            <img src="15.jpg" class="photo">
            <img src="16.jpg" class="photo">
            <img src="17.jpg" class="photo">
            <img src="18.jpg" class="photo">
            <img src="19.jpg" class="photo">
            <img src="20.jpg" class="photo">
        </div>

        <!-- åº•éƒ¨æ–‡å­— -->
        <div class="message">
            <p>ä»2020å¹´5æœˆ13æ—¥é‚£ä¸ªå¤å¤©å¼€å§‹</p>
            <p>æ¯ä¸€å¤©éƒ½æ˜¯å¯»æ¢¦çš„æ—…ç¨‹</p>
            <p>æƒ…äººèŠ‚å¿«ä¹ï¼Œæˆ‘çš„å®è´ â¤ï¸</p>
        </div>

        <!-- èƒŒæ™¯éŸ³ä¹ -->
        <audio id="bgm" loop>
            <source src="bgm.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- å›¾ç‰‡æ”¾å¤§å¼¹å±‚ï¼šç‚¹å‡»ä»»æ„å¤„å…³é—­ -->
    <div id="photo-modal" class="photo-modal" onclick="closePhotoModal()">
        <img id="photo-modal-img" src="" alt="æ”¾å¤§é¢„è§ˆ">
    </div>

    <script>
        // --- æ ¸å¿ƒé€»è¾‘åŒº ---

        // 1. è®¾ç½®å¼€å§‹æ—¶é—´ï¼š2020-05-13
        const startDate = new Date('2020-05-13T00:00:00');

        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            document.getElementById('days').innerText = days;
            document.getElementById('timer-detail').innerText = 
                `${hours.toString().padStart(2, '0')}å°æ—¶ ${minutes.toString().padStart(2, '0')}åˆ† ${seconds.toString().padStart(2, '0')}ç§’`;
        }

        // 2. è½®æ’­å›¾é€»è¾‘
        let currentPhoto = 0;
        let rotateIntervalId = null;
        const photos = document.querySelectorAll('.photo');
        function rotatePhotos() {
            photos[currentPhoto].classList.remove('active');
            currentPhoto = (currentPhoto + 1) % photos.length;
            photos[currentPhoto].classList.add('active');
        }

        // éŸ³ä¹æ’­æ”¾/æš‚åœåˆ‡æ¢
        function toggleMusic() {
            const bgm = document.getElementById('bgm');
            const icon = document.getElementById('music-icon');
            if (bgm.paused) {
                bgm.play();
                icon.classList.remove('paused');
            } else {
                bgm.pause();
                icon.classList.add('paused');
            }
        }

        // ç‚¹å‡»å›¾ç‰‡æ”¾å¤§ï¼Œæš‚åœè½®æ’­
        function openPhotoModal(src) {
            const modal = document.getElementById('photo-modal');
            document.getElementById('photo-modal-img').src = src;
            modal.classList.add('open');
            if (rotateIntervalId) { clearInterval(rotateIntervalId); rotateIntervalId = null; }
        }
        function closePhotoModal() {
            document.getElementById('photo-modal').classList.remove('open');
            if (!rotateIntervalId) { rotateIntervalId = setInterval(rotatePhotos, 4500); }
        }

        // 3. å¯åŠ¨å‡½æ•°
        function startSurprise() {
            // éšè—å¯åŠ¨é¡µï¼Œæ˜¾ç¤ºå†…å®¹
            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(() => {
                document.getElementById('start-screen').style.display = 'none';
                document.getElementById('content').style.display = 'flex';
            }, 1000);

            // æ’­æ”¾éŸ³ä¹
            const bgm = document.getElementById('bgm');
            bgm.volume = 0.5; // éŸ³é‡é€‚ä¸­
            bgm.play().catch(e => console.log("æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®"));

            // å¯åŠ¨å®šæ—¶å™¨
            setInterval(updateTimer, 1000);
            updateTimer();
            
            // å¯åŠ¨ç…§ç‰‡è½®æ’­ (æ¯4.5ç§’æ¢ä¸€å¼ )
            rotateIntervalId = setInterval(rotatePhotos, 4500);

            // ç‚¹å‡»å½“å‰æ˜¾ç¤ºçš„å›¾ç‰‡å¯æ”¾å¤§ï¼Œå¹¶æš‚åœè½®æ’­
            document.querySelector('.photo-container').addEventListener('click', function(e) {
                if (e.target.classList && e.target.classList.contains('photo')) {
                    openPhotoModal(e.target.src);
                }
            });
        }
    </script>
</body>
</html>